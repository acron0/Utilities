<html>
<head>
<script src="js/jquery-1.6.4.min.js" type="text/javascript"></script>  

<script type = "text/javascript">
  
	// globals
	var canvas, context, data, imgIndex;
	var imgs = new Array();
	imgIndex = -1;
	
	// helpers
	function getNewImage() {
		
		// get image url from jsonp	
		var jqxhr = $.getJSON('http://teamwoods.org/deadendthrills/jsonp?callback=?', function(json){data = json});
		jqxhr.success(successFunction);
		jqxhr.error(errorFunction);
	}
	
	// callback functions
	function successFunction() {
	
		console.log('Processing: ' + data.image.url);
		
		imgIndex += 1;
		if (imgIndex > 1 ) {
			imgIndex = 0;
		}
		
		imgs[imgIndex] = new Image();
		imgs[imgIndex].src = data.image.url;
		imgs[imgIndex].onload = function() {data.image.url
			context.drawImage(imgs[imgIndex], 0, 0, canvas.width, canvas.height);
		};
		
	}
	
	function errorFunction() {
		$("body").append("An error occurred.");
	}
	
	$(document).ready(function() {
	
		canvas = document.getElementById("slideshow");
		context = canvas.getContext("2d");
		context.fillStyle = "#333";
		
		context.fillRect(0, 0, canvas.width, canvas.height);
		
		getNewImage();

	});

</script>
</head>
<body style="padding: 0; margin: 20 0 0 0;">
<center>
	<canvas id="slideshow" width="640" height="384">
	</canvas>
</center>
</body>
</html>